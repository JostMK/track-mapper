<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Track Mapper</title>

    <link rel="icon" href="favicon.ico">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
    <header>
        <h1>Track Mapper</h1>
        <span class="spacer"></span>
        <a id="git-button" href="https://github.com/JostMK/track-mapper">
            <img src="res/github-mark.svg" alt="GitHub Logo" height="100%" />
            <span>Github Page</span>
        </a>
    </header>

    <main>
        <div id="map"></div>

        <form id="input-form" class="form" onSubmit="return false;">
            <span class="input-option">
                <label for="input-track-name">Track Name:</label>
                <input type="text" name="track-name" id="input-track-name" placeholder="Test Track">
            </span>

            <span class="input-option">
                <input type="button" value="Add Raster" class="input-btn" id="raster-add-btn">

                <ul class="entry-list" id="raster-list">
                    <li class="entry-item template" id="raster-template">
                        <p>::raster-name::</p>
                        <button type="button" class="btn-delete">
                            <span>Delete Raster</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </li>
                    <li class="entry-placeholder" id="raster-placeholder">No Raster added yet</li>
                </ul>
            </span>

            <span class="input-option">
                <div class="inline-children-spaced">
                    <input type="button" value="Add Path" class="input-btn" id="path-add-btn">

                    <label class="checkbox hide" id="path-closed-checkbox">
                        <input type="checkbox" name="track-closed" id="input-track-closed">
                        Close loop
                    </label>
                </div>

                <ul class="entry-list" id="path-list">
                    <li class="entry-item template" id="path-template">
                        <p>::path-name::</p>
                        <button type="button" class="btn-delete">
                            <span>Delete Path</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </li>
                    <li class="entry-placeholder" id="path-placeholder">No Path added yet</li>
                </ul>
            </span>

            <span class="input-option">
                <label for="input-track-name">Output Folder:</label>
                <input type="text" name="track-name" id="input-output-path" placeholder="Path for Output">
            </span>

            <span class="input-option">
                <input type="button" value="Create Track" class="input-btn" onclick="startTrackCreation()">
            </span>

            <h3 class="subheader">Optional:</h3>
            <span class="input-option">
                <div class="stack-children">
                    <label for="input-proj-ref">Projection:</label>
                    <textarea name="proj-ref-txt" id="input-proj-ref" rows="3" cols="48"
                        placeholder="Enter OGC WKT (can be obtained from e.g. https://epsg.io)"></textarea>
                </div>
            </span>
        </form>
    </main>

    <form id="popup-raster-form" class="popup form hide" onSubmit="return false;">
        <span class="input-option">
            <label for="popup-raster-path" hidden>Raster Path:</label>
            <input type="text" name="raster-path" id="popup-raster-path" placeholder="Full Path to Raster File"
                size="96">
        </span>
        <span class="input-option">
            <input type="button" value="Add Raster" class="input-btn btn-pending" onclick="addRaster()">
            <input type="button" value="Cancel" class="input-btn" onclick="closeRasterPopup()">
        </span>
    </form>

    <div class="hide" id="progress-popup">
        <div class="screen-blocker"></div>
        <div class="popup progress-panel">
            <h3 class="subheader">Creating Track:</h3>
            <span class="inline-children-spaced">
                <span class="loader" id="progress-spinner"></span>
                <p class="progress-text" id="progress-text">Task 0/0: Task Description</p>
            </span>
        </div>
    </div>

    <script src="map.js"></script>
    <script src="input.js"></script>
</body>

</html>